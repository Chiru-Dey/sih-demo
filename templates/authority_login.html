{% extends "base.html" %}

{% block title %}Authority Login - Disastrous{% endblock %}

{% block content %}
<div class="page-container">
    <div class="page-header">
        <h1><i class="fas fa-user-shield"></i> Authority Login</h1>
        <p>Secure access for emergency management authorities</p>
    </div>

    <div class="form-container">
        <form id="authority-login-form">
            <div class="form-group">
                <label for="authority-id">Authority ID</label>
                <div class="input-group">
                    <i class="fas fa-id-badge"></i>
                    <input type="text" id="authority-id" name="authority-id" class="form-control"
                        placeholder="Enter your authority ID" required>
                </div>
            </div>

            <div class="form-group">
                <label for="password">Password</label>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="password" name="password" class="form-control" placeholder="Enter your password"
                        required>
                </div>
            </div>

            <button type="submit" class="btn-primary">
                <i class="fas fa-sign-in-alt"></i> Login
            </button>
        </form>
    </div>
</div>

<script>
    document.getElementById('authority-login-form').addEventListener('submit', function (e) {
        e.preventDefault();
        handleLogin();
    });

    function handleLogin() {
        const authorityId = document.getElementById('authority-id').value;
        const password = document.getElementById('password').value;

        if (!authorityId || !password) {
            showNotification('Please fill in all fields', 'warning');
            return;
        }

        // Simulate login process
        const loginButton = document.querySelector('.btn-primary');
        loginButton.disabled = true;
        loginButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Authenticating...';

        setTimeout(() => {
            if (authorityId === 'ADMIN001' && password === 'demo123') {
                showNotification('Login successful! Redirecting...', 'success');
                // Redirect to a dashboard page in a real app
            } else {
                showNotification('Invalid credentials. Please try again.', 'error');
            }
            
            loginButton.disabled = false;
            loginButton.innerHTML = '<i class="fas fa-sign-in-alt"></i> Login';
        }, 2000);
    }
</script>
{% endblock %}